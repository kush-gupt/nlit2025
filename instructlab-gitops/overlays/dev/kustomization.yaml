apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base

patches:
- path: pipeline-patch.yaml
- path: storage-patch.yaml
- path: secrets-patch.yaml

configMapGenerator:
- name: instructlab-pipeline-params
  behavior: merge
  literals:
  # TODO: Replace storage class
  - k8s_storage_class_name=nfs-csi
  - train_gpu_identifier=nvidia.com/gpu
  - sdg_batch_size=16
  - sdg_num_workers=4
  - train_num_workers=2
  - train_memory_per_worker=120Gi
